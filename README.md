# Every subgroup of a free group is free, in Lean

This project contains a simple formalised proof of the Nielsen-Schreier 
theorem, which says that a subgroup of a free group is also free, as 
well as the related index formula. Informally, the proof goes as 
follows:

1) Given a subgroup H of a free group G, observe that under the action of G on
   the coset space G / H, H is the stabilizer of 1H. Moreover, this stabilizer
   is an automorphism group in the corresponding category of elements.

1) Say a *groupoid* G is *freely generated* by some graph S of morphisms
  if, for any group X, every assignment of values in X to the morphisms
  in S determines a unique functor G -> X. This notion corresponds to the notion 
  of 'topological graph'. (We could more generally require that a functor from G
  to a groupoid X be uniquely determined by a graph homomorphism from S to X,
  but that is not needed for the proof.)

1) Show that if G is a free group acting on some set A, then the 
  corresponding category of elements is freely generated by morphisms
  'lying above' the generators of G. This can be thought of as a
  restricted version of the fact that a covering space of a graph is also
  a graph. \
  The proof of this proceeds by showing that a functor from the category of 
  elements to X corresponds to a group homomorphism from G to a 
  semidirect product of A -> X and G.

1) Show that if G is freely generated by some graph, and we have a
  spanning tree of this graph, and x is an object of G, then the
  automorphism group of x is freely generated by certain loops
  coming from the complement of the spanning tree. This corresponds to
  the topological fact that we can deformation retract the spanning
  tree to a point.

1) Show that any connected graph has a spanning tree.

There is a somewhat unpleasant technicality in showing that the graph under
consideration really is connected. We take care of this by adding an induction
principle in the definition of free groupoid.

The Lean code is currently organized as follows:

- `misc.lean` contains a few simple facts
- `quiver.lean` contains the definition of 'quivers' (which is what we mean by
'graph') and a couple of simple definitions about them
- `free.lean` contains the definitions of free groups and free groupids, and some simple facts. Our definition of when a group is free is abstract and
independent of mathlib's construction of free groups, although we prove that
they are equivalent in a suitable sense.
- `covering.lean` contains the proof of 3.
- `contract.lean` contains the proof of 4.
- `connected.lean` contains some simple lemmas about notions of connectivity
- `arboresence.lean` contains the proof of 5.
- `result.lean` deduces the main attraction: a subgroup of a free group is free
- `index_formula.lean` does some simple calculation to deduce the index formula.